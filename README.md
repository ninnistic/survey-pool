# SurveyPool

## 실행 방법

프로젝트를 clone한 뒤, `npm start`를 통해 프로젝트를 실행 할 수 있습니다.

## 주요 컴포넌트 설명

![component](/docs/img/component.png)

## 화면 구성

- [x] UI는 상단, 중앙, 하단의 레이아웃을 가지고 있다.
- [ ] 상단에는 로고가 위치한다.
- [x] 하단은 CTA 버튼이 위치한다.
- [x] 중앙에는 설문 조사 form이 위치하고 input에 자동 focus 된다.
- [x] 중앙 가장 위에 현재 설문조사 progress 상태를 볼 수 있다. (현재 진행률)

### 화면 예시 디자인

- 다음과 같은 화면 구성을 참고하고, 명시되지 않은 꾸밈요소와 컴포넌트는 자율이다.
  https://pschzwbys8l.typeform.com/to/WkUwovxz

## 기능 구현

### 공통 질문

- [x] 유저가 입장하면 `/api/question/common`으로 질문지를 받는다.
- [ ] 유저가 대상이 아닌 경우 `/no_target`으로 redirect 시킨다.
- [x] 유저 답변을 `/api/answers/common`으로 post 요청하고, 다음 질문지 typeID와 userId를 받는다.

### 질문지

- 공통 질문을 통해 얻은 typeID를 이용해 `/api/question/:typeID`에 요청해 질문지를 받는다.
- 질문지는 data.forms에 제시된 순서로 user에게 답변을 받는다.
- 답변을 다 받으면 `/api/answers/:typeID`에 post로 작성한 답변과 userId을 업로드한다.
- nextTypeId가 없으면 `/thanks` 페이지로 이동 후 설문조사를 종료한다.

## 추가 구현

- 한/영 지원
  - 모든 api는 `?lang=en`을 통해 질문을 영어로 받을 수 있다.

## 와이어 프레임

![wireframe](/docs/img/wireframe.png)

## 브랜치

- feature 브랜치에서 개발 진행
- feature에서 구현 기능 단위로 브랜치를 생성한다.

## 구현 과정

### phase 1

- [x] 입출력 관련

  - [x] get요청으로 받아온 data에 의해서, 순서대로 forms를 보여주어야 한다.
  - [x] 질문을 보여주고, 답을 입력할 수 있는 input이 제시된다.
  - [x] 사용자가 잘못 된 입력값을 작성하거나, 입력을 하지 않았을 경우 에러메세지를 보여주고 다시 입력할 수 있게 한다.

### phase 1 - 구현 계획

- [x] `data.forms.type`에 맞춰 해당하는 컴포넌트를 렌더한다.
- [x] `data.escapeValidate.name`와 `data.forms.name`이 동일할 경우, `data.forms.validate.target`을 비교하여, 유효성검증을 한다.

### phase 2 - CSS

`<Question />`

- [x] Next(OK) 버튼을 눌렀을 때 index 를 넘지 않도록 하기
- [x] footer를 구현할 때, 위 아래로 가는 버튼 만들기
- [x] question 1(첫번째 질문) 에서 back 버튼이 disabled 되도록 하기 (되긴 하나 CSS로 구현 안함)
- [x] 마지막 질문에서 next 버튼이 disabled 되도록 하기
- [x] question에서 next 버튼, footer의 next버튼이 value가 입력되지 않거나 유효성 검증을 통과하지 않으면 disabled 되도록 하기
- [x] Question은 current question 숫자를 보여주기

## 고려사항

1. 재사용성이 높은 컴포넌트 설계
2. FormSurvey에서 여러개의 컴포넌트를 보여주는 상황에서 동적 렌더링을 위한 방법 생각하기
3. ContextAPI를 적절히 활용할 것

## 미해결 사항 (+에러사항)

- [ ] [미구현] 전반적인 CSS 완성도 (시간부족으로 CSS는 많이 소홀합니다..)
- [ ] [미구현] 로고 미생성
- [ ] [미구현] 유저가 대상이 아닐경우 `no_target`으로 리다이렉트 하는 부분
- [ ] [에러] validation 타입 에러로 인해 모든 Input component에 역할하지 못한다. (RadioWithInput에는 type에러로 안됨..)
- [ ] [에러] `common`설문조사가 완료된 이후 `survey/:typeID`로 이동해야 하는데 `survey/undefined`로 이동해야 한다.
- [ ] [미구현] `NumberInput` age가 음수도 pass 되는 부분
- [ ] [에러 + 미구현] type question 마지막 submit 시에 `/thanks`로 redirect 되어야 한다.
- [ ] [미구현] 추가구현 부분 ( 영어 )

## 소감

- 아쉬움이 남는 부분은 좀 더 짜임새 있게 프로젝트 설계를 하고 진행했으면 중간에 스파게티 코드 없이 해결할 수 있는 부분이 좀 더 많았을텐데 그렇지 못해서 아쉽다.
- 지금껏 쉽게 써온 라이브러리 없이 하나하나 구현하면서 어떻게 프로젝트에 접근해야하는지 안목을 기를 수 있어서 좋았다.
- 복잡하지만 열심히 생각해서 최대한 구현해보려고 노력을 했다.. 구글링을 열심히 하며 도움 많이 받았다.

## 질문

- 프로젝트 처음 설계시 접근하는 방법
  - 이 부분은, 개인적으로 처음 프로젝트를 보고서는 '아주 어렵지는 않겠다..' 라고 생각했습니다. 그러나 추후에 계속 구현하다보니 생각보다 디테일하게 만들어야 하는 기능들이 많아 결국 초반의 프로젝트 구현 계획이 미흡했음을 알 수 있었습니다. 뒤로 갈수록 큰 그림을 그리지 못한 채 만든 기능들이 결국 에러의 주요 원인이 되기도 했고, 또는 이리저리 얽힌 부분이 많아 리팩토링을 하느라 코드를 손 댄 곳이 많았는데 이런 부분을 잘 해결해나가는 방법이나 크게 생각하는 방법..이 궁금합니다.
  - 또 타입에서도 비슷한 어려움을 겪었는데, 처음에는 이러한 타입이 들어가겠구나 하고 최대한 계산을 한 뒤 타입지정을 했는데 추후에 타입이 추가되거나 달라지면서 기존에 적용된 타입과 props들에 에러를 일으키는등... 아무래도 이런쪽에서 저는 많은 어려움을 겪은 것 같습니다.
- 또 이 외에 깔끔하게 코드를 리팩토링 할 수 있는 부분 혹은 개선이 이루어지면 좋은 방향, 현업에서 사용하는 방법 등 모든 조언과 리뷰는 감사히 듣겠습니다.
